"use strict";(globalThis.webpackChunkmy_web=globalThis.webpackChunkmy_web||[]).push([[1355],{5149:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>m,frontMatter:()=>s,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"book/robotic-nervous-system/index","title":"The Robotic Nervous System (ROS 2)","description":"Middleware for robot control using ROS 2","source":"@site/docs/book/robotic-nervous-system/index.md","sourceDirName":"book/robotic-nervous-system","slug":"/book/robotic-nervous-system/","permalink":"/physical-ai-robotics-textbook/docs/book/robotic-nervous-system/","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/book/robotic-nervous-system/index.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"The Robotic Nervous System (ROS 2)","sidebar_position":1,"description":"Middleware for robot control using ROS 2"},"sidebar":"bookSidebar","previous":{"title":"Introduction","permalink":"/physical-ai-robotics-textbook/docs/book/introduction/"},"next":{"title":"ROS 2 Nodes, Topics, and Services","permalink":"/physical-ai-robotics-textbook/docs/book/robotic-nervous-system/ros2-nodes-topics-services"}}');var r=o(4848),i=o(8453);const s={title:"The Robotic Nervous System (ROS 2)",sidebar_position:1,description:"Middleware for robot control using ROS 2"},a="The Robotic Nervous System (ROS 2)",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Key Components",id:"key-components",level:2},{value:"ROS 2 Nodes, Topics, and Services",id:"ros-2-nodes-topics-and-services",level:3},{value:"Bridging Python Agents to ROS Controllers using rclpy",id:"bridging-python-agents-to-ros-controllers-using-rclpy",level:3},{value:"Understanding URDF (Unified Robot Description Format) for Humanoids",id:"understanding-urdf-unified-robot-description-format-for-humanoids",level:3},{value:"Module Objectives",id:"module-objectives",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Learning Path",id:"learning-path",level:2},{value:"Hardware Requirements for ROS 2 Systems",id:"hardware-requirements-for-ros-2-systems",level:2},{value:"Sample ROS 2 Implementation",id:"sample-ros-2-implementation",level:2},{value:"ROS 2 Architecture Diagram",id:"ros-2-architecture-diagram",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",technicaldiagrams:"technicaldiagrams",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"import HardwareSpecs from '@site/src/components/HardwareSpecs/HardwareSpecs';\nimport CodeExamples from '@site/src/components/CodeExamples/CodeExamples';\nimport TechnicalDiagrams from '@site/src/components/TechnicalDiagrams/TechnicalDiagrams';"}),"\n",(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"the-robotic-nervous-system-ros-2",children:"The Robotic Nervous System (ROS 2)"})}),"\n",(0,r.jsx)(n.p,{children:"Focus: Middleware for robot control."}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:'ROS 2 (Robot Operating System 2) serves as the "nervous system" of robotic platforms. It provides the communication framework that allows different components of a robot to work together seamlessly. This module covers the essential concepts and implementation of ROS 2 for controlling humanoid robots.'}),"\n",(0,r.jsx)(n.h2,{id:"key-components",children:"Key Components"}),"\n",(0,r.jsx)(n.h3,{id:"ros-2-nodes-topics-and-services",children:"ROS 2 Nodes, Topics, and Services"}),"\n",(0,r.jsx)(n.p,{children:"The fundamental building blocks of ROS 2 communication:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Nodes"}),": Individual processes that perform computation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Topics"}),": Unidirectional data streams for publishing/subscribing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Services"}),": Bidirectional request/response communication"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"bridging-python-agents-to-ros-controllers-using-rclpy",children:"Bridging Python Agents to ROS Controllers using rclpy"}),"\n",(0,r.jsx)(n.p,{children:"Connecting AI agents to robot control systems through ROS 2's Python client library."}),"\n",(0,r.jsx)(n.h3,{id:"understanding-urdf-unified-robot-description-format-for-humanoids",children:"Understanding URDF (Unified Robot Description Format) for Humanoids"}),"\n",(0,r.jsx)(n.p,{children:"URDF is crucial for describing robot geometry, kinematics, and dynamics, especially for complex humanoid robots."}),"\n",(0,r.jsx)(n.h2,{id:"module-objectives",children:"Module Objectives"}),"\n",(0,r.jsx)(n.p,{children:"By the end of this module, you will:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Understand the architecture and communication patterns of ROS 2"}),"\n",(0,r.jsx)(n.li,{children:"Implement nodes that can communicate via topics and services"}),"\n",(0,r.jsx)(n.li,{children:"Create bridges between Python-based AI agents and ROS controllers"}),"\n",(0,r.jsx)(n.li,{children:"Design and work with URDF files for humanoid robots"}),"\n",(0,r.jsx)(n.li,{children:"Develop basic control systems for robot actuators"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Basic Python programming skills"}),"\n",(0,r.jsx)(n.li,{children:"Understanding of object-oriented programming concepts"}),"\n",(0,r.jsx)(n.li,{children:"Fundamental knowledge of robotics concepts (optional but helpful)"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"learning-path",children:"Learning Path"}),"\n",(0,r.jsx)(n.p,{children:"This module builds the foundation for all subsequent modules, as ROS 2 serves as the backbone for communication between perception, planning, and actuation systems in our humanoid robotics applications."}),"\n",(0,r.jsx)(n.h2,{id:"hardware-requirements-for-ros-2-systems",children:"Hardware Requirements for ROS 2 Systems"}),"\n",(0,r.jsx)(n.p,{children:'<HardwareSpecs\nname="ROS 2 Development Platform"\ncategory="Robotics Middleware"\nspecs={{\ncpu: "4+ core processor (Intel i5 or AMD Ryzen 5+)",\nmemory: "8GB+ RAM (16GB recommended)",\nstorage: "50GB+ available space",\nnetwork: "Gigabit Ethernet, WiFi 802.11n+",\nos: "Ubuntu 22.04 LTS, Windows 10/11, macOS 12+"\n}}\ncost={{\nprice: "Varies (existing hardware often sufficient)",\nreasoning: "ROS 2 can run on standard development machines but benefits from more powerful hardware for simulation"\n}}\npros={[\n"Can run on existing development machines",\n"Lightweight for basic operations",\n"Cross-platform compatibility",\n"Large community and package ecosystem"\n]}\ncons={[\n"Performance limited by hardware for complex simulations",\n"Real-time performance requires special configurations",\n"Network setup can be complex in multi-robot systems"\n]}\n/>'}),"\n",(0,r.jsx)(n.h2,{id:"sample-ros-2-implementation",children:"Sample ROS 2 Implementation"}),"\n",(0,r.jsx)(n.p,{children:'<CodeExamples\ntitle="ROS 2 Action Client for Humanoid Robot"\ndescription="Implementation of a ROS 2 action client for controlling humanoid robot movements"\nlanguage="python"\ncode={`import rclpy\nfrom rclpy.action import ActionClient\nfrom rclpy.node import Node\nfrom control_msgs.action import FollowJointTrajectory\nfrom trajectory_msgs.msg import JointTrajectory, JointTrajectoryPoint\nfrom builtin_interfaces.msg import Duration\nimport time'}),"\n",(0,r.jsxs)(n.p,{children:["class HumanoidController(Node):\ndef ",(0,r.jsx)(n.strong,{children:"init"}),"(self):\nsuper().",(0,r.jsx)(n.strong,{children:"init"}),"('humanoid_controller')"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"    # Create action client for trajectory execution\n    self._action_client = ActionClient(\n        self,\n        FollowJointTrajectory,\n        'joint_trajectory_controller/follow_joint_trajectory'\n    )\n\n    # Define joint names for humanoid robot\n    self.joint_names = [\n        'left_hip_joint', 'left_knee_joint', 'left_ankle_joint',\n        'right_hip_joint', 'right_knee_joint', 'right_ankle_joint',\n        'left_shoulder_joint', 'left_elbow_joint',\n        'right_shoulder_joint', 'right_elbow_joint',\n        'head_pan_joint', 'head_tilt_joint'\n    ]\n\n    self.get_logger().info('Humanoid Controller initialized')\n\ndef send_trajectory_goal(self, positions, durations):\n    \"\"\"Send a trajectory goal to the robot\"\"\"\n    # Wait for action server\n    self._action_client.wait_for_server()\n\n    # Create goal message\n    goal_msg = FollowJointTrajectory.Goal()\n    goal_msg.trajectory = JointTrajectory()\n    goal_msg.trajectory.joint_names = self.joint_names\n\n    # Add trajectory points\n    for i, pos in enumerate(positions):\n        point = JointTrajectoryPoint()\n        point.positions = pos\n        point.time_from_start = Duration(sec=durations[i])\n        goal_msg.trajectory.points.append(point)\n\n    # Send goal\n    self._send_goal_future = self._action_client.send_goal_async(\n        goal_msg,\n        feedback_callback=self.feedback_callback\n    )\n\n    self._send_goal_future.add_done_callback(self.goal_response_callback)\n\ndef goal_response_callback(self, future):\n    \"\"\"Handle goal response\"\"\"\n    goal_handle = future.result()\n    if not goal_handle.accepted:\n        self.get_logger().info('Goal rejected')\n        return\n\n    self.get_logger().info('Goal accepted')\n    self._get_result_future = goal_handle.get_result_async()\n    self._get_result_future.add_done_callback(self.get_result_callback)\n\ndef get_result_callback(self, future):\n    \"\"\"Handle result of trajectory execution\"\"\"\n    result = future.result().result\n    self.get_logger().info(f'Result: {result}')\n\ndef feedback_callback(self, feedback_msg):\n    \"\"\"Handle feedback during trajectory execution\"\"\"\n    feedback = feedback_msg.feedback\n    self.get_logger().info(f'Feedback: {feedback}')\n\ndef create_walk_trajectory(self):\n    \"\"\"Create a simple walking trajectory\"\"\"\n    # Define key poses for walking gait\n    stance_poses = [\n        [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],  # Initial stance\n        [0.1, -0.2, 0.1, -0.1, 0.2, -0.1, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],  # Step forward left\n        [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],  # Return to stance\n    ]\n\n    # Define timing for each pose (in seconds)\n    durations = [1, 2, 3]  # 1s to first pose, 2s to second, 3s to return\n\n    return stance_poses, durations\n"})}),"\n",(0,r.jsx)(n.p,{children:"def main(args=None):\nrclpy.init(args=args)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"controller = HumanoidController()\n\n# Create and send a walking trajectory\npositions, durations = controller.create_walk_trajectory()\ncontroller.send_trajectory_goal(positions, durations)\n\ntry:\n    rclpy.spin(controller)\nexcept KeyboardInterrupt:\n    pass\nfinally:\n    controller.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,r.jsxs)(n.p,{children:["if ",(0,r.jsx)(n.strong,{children:"name"})," == '",(0,r.jsx)(n.strong,{children:"main"}),'\':\nmain()`}\ncopyable={true}\nexpandable={true}\nmaxHeight="400px"\n/>']}),"\n",(0,r.jsx)(n.h2,{id:"ros-2-architecture-diagram",children:"ROS 2 Architecture Diagram"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.technicaldiagrams,{title:"ROS 2 Middleware Architecture",description:"Architecture diagram showing the communication between different ROS 2 nodes in a humanoid robot system",imageurl:"/img/ros2-architecture.png",caption:"ROS 2 architecture showing nodes, topics, services, and actions in a humanoid robot control system",alttext:"ROS 2 architecture diagram for humanoid robot",interactive:"{true}",zoomable:"{true}"})})]})}function m(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>s,x:()=>a});var t=o(6540);const r={},i=t.createContext(r);function s(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);